<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="train-delay-details-papi-test-suite.xml" />
	<munit:test name="train-delay-details-papi-test-suite-train-delayDetailsRetrievalFlowTest" doc:id="b09e43cb-b9d0-44ab-8596-26134a4aa1b8" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when" doc:id="ff0d846f-564a-409f-89d3-d844d74ac33f" >
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="subsPayload" value='#[output application/json --- "DB payload"]' mediaType="application/json" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock when" doc:id="2f8fa21e-c748-4284-b396-ff764a75e751" />
		</munit:behavior>
		<munit:execution >
			<flow-ref doc:name="train-delay-papi-setEvent" doc:id="d8f8b98e-c42c-430a-81a5-71675864be7f" name="train-delay-papi-setEvent"/>
			<flow-ref doc:name="Flow-ref to train-delayDetailsRetrievalFlow" doc:id="b67a0bee-8914-4283-aaa5-c74c91b05471" name="train-delayDetailsRetrievalFlow"/>
		</munit:execution>
	</munit:test>
	<flow name="train-delay-papi-setEvent" doc:id="d53f8439-c214-4d6f-ae73-2daf86d41c3c" >
		<munit:set-event doc:name="Set Event" doc:id="d85b535d-ac0d-445c-9571-c7f5182c9c50" >
			<munit:payload value='#[&#10;output application/json&#10;---&#10;{&#10;  "headers": {&#10;    &#10;  },&#10;  "attachments": {&#10;    &#10;  },&#10;  "body": {&#10;    "GetDepBoardWithDetailsResponse": {&#10;      "GetStationBoardResult": {&#10;        "generatedAt": "2021-05-27T05:58:00.3122244+01:00",&#10;        "locationName": "London Bridge",&#10;        "crs": "LBG",&#10;        "filterLocationName": "London Cannon Street",&#10;        "filtercrs": "CST",&#10;        "nrccMessages": {&#10;          "message": "\nA member of signalling staff has been taken ill at Bognor Regis. Consequently, trains in the area may be cancelled or revised. More details can be found in &lt;a href=\"http://nationalrail.co.uk/service_disruptions/272026.aspx \"&gt;Latest Travel News.&lt;/a&gt;"&#10;        },&#10;        "platformAvailable": "true",&#10;        "trainServices": {&#10;          "service": {&#10;            "std": "00:24",&#10;            "etd": "On time",&#10;            "platform": "3",&#10;            "operator": "Southeastern",&#10;            "operatorCode": "SE",&#10;            "serviceType": "train",&#10;            "length": "10",&#10;            "serviceID": "eZvJOmXIugxJr2nArCuzNg==",&#10;            "rsid": "SE556800",&#10;            "origin": {&#10;              "location": {&#10;                "locationName": "Crayford",&#10;                "crs": "CRY"&#10;              }&#10;            },&#10;            "destination": {&#10;              "location": {&#10;                "locationName": "London Cannon Street",&#10;                "crs": "CST"&#10;              }&#10;            },&#10;            "formation": {&#10;              "coaches": {&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "Standard"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "Accessible"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "Accessible"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                }&#10;              }&#10;            },&#10;            "subsequentCallingPoints": {&#10;              "callingPointList": {&#10;                "callingPoint": {&#10;                  "locationName": "London Cannon Street",&#10;                  "crs": "CST",&#10;                  "st": "06:14",&#10;                  "et": "On time",&#10;                  "length": "10",&#10;                  "formation": {&#10;                    "coaches": {&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "Standard"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "Accessible"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "Accessible"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      }&#10;                    }&#10;                  }&#10;                }&#10;              }&#10;            }&#10;          },&#10;          "service": {&#10;            "std": "00:43",&#10;            "etd": "Cancelled",&#10;            "platform": "3",&#10;            "operator": "Southeastern",&#10;            "operatorCode": "SE",&#10;            "serviceType": "train",&#10;            "length": "8",&#10;            "cancelReason": "This train has been cancelled because of a derailed train",&#10;            "serviceID": "wL2KIKqaJee9RYZuxsTWHg==",&#10;            "rsid": "SE573600",&#10;            "origin": {&#10;              "location": {&#10;                "locationName": "Orpington",&#10;                "crs": "ORP"&#10;              }&#10;            },&#10;            "destination": {&#10;              "location": {&#10;                "locationName": "London Cannon Street",&#10;                "crs": "CST"&#10;              }&#10;            },&#10;            "formation": {&#10;              "coaches": {&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "Accessible"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "Accessible"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                }&#10;              }&#10;            },&#10;            "subsequentCallingPoints": {&#10;              "callingPointList": {&#10;                "callingPoint": {&#10;                  "locationName": "London Cannon Street",&#10;                  "crs": "CST",&#10;                  "st": "06:18",&#10;                  "et": "On time",&#10;                  "length": "8",&#10;                  "formation": {&#10;                    "coaches": {&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "Accessible"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "Accessible"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      }&#10;                    }&#10;                  }&#10;                }&#10;              }&#10;            }&#10;          },&#10;          "service": {&#10;            "std": "00:40",&#10;            "etd": "00:47",&#10;            "platform": "3",&#10;            "operator": "Southeastern",&#10;            "operatorCode": "SE",&#10;            "serviceType": "train",&#10;            "length": "8",&#10;            "serviceID": "YSa8j4HOuRp7mTUmizgW1A==",&#10;            "rsid": "SE550500",&#10;            "origin": {&#10;              "location": {&#10;                "locationName": "Slade Green",&#10;                "crs": "SGR"&#10;              }&#10;            },&#10;            "destination": {&#10;              "location": {&#10;                "locationName": "London Cannon Street",&#10;                "crs": "CST"&#10;              }&#10;            },&#10;            "formation": {&#10;              "coaches": {&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "Accessible"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "Accessible"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                }&#10;              }&#10;            },&#10;            "subsequentCallingPoints": {&#10;              "callingPointList": {&#10;                "callingPoint": {&#10;                  "locationName": "London Cannon Street",&#10;                  "crs": "CST",&#10;                  "st": "06:21",&#10;                  "et": "On time",&#10;                  "length": "8",&#10;                  "formation": {&#10;                    "coaches": {&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "Accessible"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "Accessible"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      }&#10;                    }&#10;                  }&#10;                }&#10;              }&#10;            }&#10;          },&#10;          "service": {&#10;            "std": "06:42",&#10;            "etd": "On time",&#10;            "platform": "3",&#10;            "operator": "Southeastern",&#10;            "operatorCode": "SE",&#10;            "serviceType": "train",&#10;            "length": "8",&#10;            "serviceID": "rrpt9pwtQjrzC4kgJjDXFw==",&#10;            "rsid": "SE910500",&#10;            "origin": {&#10;              "location": {&#10;                "locationName": "Dover Priory",&#10;                "crs": "DVP"&#10;              }&#10;            },&#10;            "destination": {&#10;              "location": {&#10;                "locationName": "London Cannon Street",&#10;                "crs": "CST"&#10;              }&#10;            },&#10;            "formation": {&#10;              "avgLoading": "16",&#10;              "coaches": {&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "Standard"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "Accessible"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "Standard"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "Accessible"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                }&#10;              }&#10;            },&#10;            "subsequentCallingPoints": {&#10;              "callingPointList": {&#10;                "callingPoint": {&#10;                  "locationName": "London Cannon Street",&#10;                  "crs": "CST",&#10;                  "st": "06:26",&#10;                  "et": "On time",&#10;                  "length": "8",&#10;                  "formation": {&#10;                    "avgLoading": "16",&#10;                    "coaches": {&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "Standard"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "Accessible"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "Standard"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "Accessible"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      }&#10;                    }&#10;                  }&#10;                }&#10;              }&#10;            }&#10;          },&#10;          "service": {&#10;            "std": "07:24",&#10;            "etd": "On time",&#10;            "platform": "3",&#10;            "operator": "Southeastern",&#10;            "operatorCode": "SE",&#10;            "serviceType": "train",&#10;            "length": "5",&#10;            "serviceID": "0mVxjc9/VYqg8c017qRsSA==",&#10;            "adhocAlerts": {&#10;              "adhocAlertText": " Will be formed of 5 coaches instead of 10. "&#10;            },&#10;            "rsid": "SE551800",&#10;            "origin": {&#10;              "location": {&#10;                "locationName": "Dartford",&#10;                "crs": "DFD"&#10;              }&#10;            },&#10;            "destination": {&#10;              "location": {&#10;                "locationName": "London Cannon Street",&#10;                "crs": "CST"&#10;              }&#10;            },&#10;            "formation": {&#10;              "avgLoading": "28",&#10;              "coaches": {&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                },&#10;                "coach": {&#10;                  "coachClass": "Standard",&#10;                  "toilet": "None"&#10;                }&#10;              }&#10;            },&#10;            "subsequentCallingPoints": {&#10;              "callingPointList": {&#10;                "callingPoint": {&#10;                  "locationName": "London Cannon Street",&#10;                  "crs": "CST",&#10;                  "st": "06:30",&#10;                  "et": "On time",&#10;                  "length": "5",&#10;                  "formation": {&#10;                    "avgLoading": "28",&#10;                    "coaches": {&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      },&#10;                      "coach": {&#10;                        "coachClass": "Standard",&#10;                        "toilet": "None"&#10;                      }&#10;                    }&#10;                  },&#10;                  "adhocAlerts": {&#10;                    "adhocAlertText": " Will be formed of 5 coaches instead of 10. "&#10;                  }&#10;                }&#10;              }&#10;            }&#10;          }&#10;        }&#10;      }&#10;    }&#10;  }&#10;}&#10;]' />
		</munit:set-event>
	</flow>

</mule>
